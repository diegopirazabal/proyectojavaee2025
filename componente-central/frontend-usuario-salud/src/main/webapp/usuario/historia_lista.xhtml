<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<f:metadata>
    <f:event type="preRenderView" listener="#{login_bean.checkAuthentication}" />
</f:metadata>
<h:head>
    <title>Mis Documentos Clínicos</title>
    <meta charset="UTF-8" />
</h:head>
<h:body>
    <h:form id="formLista">
        <p:menubar>
            <p:menuitem value="Inicio" icon="pi pi-home" outcome="/usuario/dashboard" />
            <p:menuitem value="Salir" icon="pi pi-sign-out" action="#{login_bean.logout}" />
        </p:menubar>

        <p:panel header="Mis Documentos Clínicos">
            <p:dataTable id="tabla" value="#{historia_lista_bean.documentos}" var="d" paginator="true" rows="10"
                         emptyMessage="Sin documentos">
                <p:column headerText="Título">
                    <h:outputText value="#{empty d.title ? '[Sin título]' : d.title}" />
                </p:column>
                <p:column headerText="Fecha">
                    <h:outputText value="#{d.createdAt}" />
                </p:column>
                <p:column headerText="Formatos">
                    <h:outputText value="#{d.formats}" />
                </p:column>
                <p:column headerText="Acciones" style="width:140px">
                    <p:commandLink value="Ver" icon="pi pi-eye" outcome="/usuario/historia_doc">
                        <f:param name="docId" value="#{d.id}" />
                    </p:commandLink>
                </p:column>
            </p:dataTable>
        </p:panel>
    </h:form>
</h:body>
</html>


